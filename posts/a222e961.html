<!DOCTYPE html><html lang="zh-CN" color-mode="light"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="keywords" content="python,å»ºæ¨¡,äº’è”ç½‘+,åˆ›ä¸š,hexo,github,ç´«ç ‚å£¶"><meta name="author" content="HaoQi"><meta name="description" content="å¿™ç¢Œçš„æ‰“å·¥äºº"><title>å…¨æµç¨‹å®æˆ˜ï¼šäº‘ç«¯å¾®è°ƒ Qwen2.5 åˆ° Mac(M4) æœ¬åœ°é‡åŒ–éƒ¨ç½²ä¿å§†çº§æ•™ç¨‹ | HaoQi</title><link rel="apple-touch-icon" href="https://bu.dusays.com/2022/11/22/637c4ef60f5ae.png"><link rel="icon" href="https://bu.dusays.com/2022/11/22/637c4f83b5bbb.png"><link href="https://fonts.googleapis.com/css?family=Raleway&display=swap" rel="stylesheet"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="//at.alicdn.com/t/font_1886449_67xjft27j1l.css"><script defer type="text/javascript" src="/plugins/jquery.min.js"></script><link href="/plugins/jquery.fancybox.min.css" rel="stylesheet"><script defer type="text/javascript" src="/plugins/jquery.fancybox.min.js"></script><script src="/js/fancybox.js"></script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>var html=document.documentElement;let colorMode=localStorage.getItem("color-mode");colorMode&&document.documentElement.setAttribute("color-mode",colorMode)</script><meta name="generator" content="Hexo 6.3.0"><style>.github-emoji{position:relative;display:inline-block;width:1.2em;min-height:1.2em;overflow:hidden;vertical-align:top;color:transparent}.github-emoji>span{position:relative;z-index:10}.github-emoji .fancybox,.github-emoji img{margin:0!important;padding:0!important;border:none!important;outline:0!important;text-decoration:none!important;user-select:none!important;cursor:auto!important}.github-emoji img{height:1.2em!important;width:1.2em!important;position:absolute!important;left:50%!important;top:50%!important;transform:translate(-50%,-50%)!important;user-select:none!important;cursor:auto!important}.github-emoji-fallback{color:inherit}.github-emoji-fallback img{opacity:0!important}</style><link rel="alternate" href="/atom.xml" title="HaoQi" type="application/atom+xml"><link rel="stylesheet" href="/css/prism.css" type="text/css"></head><body><div id="app"><div class="header"><div class="avatar"><a href="/"><img no-lazy src="https://bu.dusays.com/2022/11/22/637c4ef60f5ae.png" alt=""></a><div class="nickname"><a href="/">RABBIT</a></div></div><div class="navbar"><ul><li class="nav-item" data-path="/"><a href="/">Home</a></li><li class="nav-item" data-path="/archives/"><a href="/archives/">å½’æ¡£</a></li><li class="nav-item" data-path="/categories/"><a href="/categories/">åˆ†ç±»</a></li><li class="nav-item" data-path="/friends/"><a href="/friends/">å‹é“¾</a></li><li class="nav-item" data-path="/about/"><a href="/about/">å…³äº</a></li></ul></div></div><script src="/js/activeNav.js"></script><div class="flex-container"><script async type="text/javascript" src="/plugins/mathjax/tex-chtml.js"></script><script>MathJax={tex:{inlineMath:[["$","$"],["\\(","\\)"]]}}</script><script async type="text/javascript" src="/plugins/clipboard.min.js"></script><script src="/js/codeCopy.js"></script><div class="container post-details" id="post-details"><div class="post-content"><div class="post-title">å…¨æµç¨‹å®æˆ˜ï¼šäº‘ç«¯å¾®è°ƒ Qwen2.5 åˆ° Mac(M4) æœ¬åœ°é‡åŒ–éƒ¨ç½²ä¿å§†çº§æ•™ç¨‹</div><div class="post-attach"><span class="post-pubtime"><i class="iconfont icon-updatetime mr-10" title="æ›´æ–°æ—¶é—´"></i> 2026-01-16 22:00:00 </span><span class="post-categories"><i class="iconfont icon-bookmark" title="åˆ†ç±»"></i> <span class="span--category"><a href="/categories/AI%E5%AE%9E%E6%88%98/" title="AIå®æˆ˜"><b>#</b> AIå®æˆ˜ </a></span><span class="span--category"><a href="/categories/AI%E5%AE%9E%E6%88%98/%E6%A8%A1%E5%9E%8B%E9%83%A8%E7%BD%B2/" title="æ¨¡å‹éƒ¨ç½²"><b>#</b> æ¨¡å‹éƒ¨ç½²</a></span></span></div><div class="markdown-body"><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>åœ¨æ¢ç´¢ AI æ•°å­—äººé¡¹ç›®çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸é¢ä¸´ä¸€ä¸ªå°´å°¬çš„åœºæ™¯ï¼šäº‘ç«¯ç®—åŠ›å¹³å°ï¼ˆå¦‚ AutoDL ç­‰ï¼‰è™½ç„¶æ˜¾å¡å¼ºå¤§é€‚åˆè®­ç»ƒï¼Œä½†ç£ç›˜ç©ºé—´é€šå¸¸éå¸¸ç´§å¼ ï¼Œæ— æ³•å®¹çº³å¾®è°ƒåçš„åˆå¹¶æ“ä½œï¼ˆå¾€å¾€éœ€è¦ 2-3 å€æ¨¡å‹ä½“ç§¯çš„ç©ºé—´ï¼‰ã€‚è€Œæœ¬åœ°è®¾å¤‡ï¼ˆå¦‚ Mac M4ï¼‰æ‹¥æœ‰æå¼ºçš„æ¨ç†æ€§èƒ½å’Œå¤§å®¹é‡ç¡¬ç›˜ï¼Œå´ä¸é€‚åˆé•¿æ—¶é—´çš„è®­ç»ƒä»»åŠ¡ã€‚</p><p>æœ¬æ–‡å°†æ‰‹æŠŠæ‰‹æ•™ä½ å¦‚ä½•æ‰“é€šè¿™ä¸¤ç«¯ï¼š<strong>åœ¨äº‘ç«¯åªåšè®­ç»ƒï¼Œåªä¸‹è½½å‡ ç™¾ MB çš„è¡¥ä¸ï¼ˆAdapterï¼‰ï¼Œç„¶ååœ¨ Mac æœ¬åœ°å®Œæˆé«˜é…ç½®è¦æ±‚çš„æ¨¡å‹åˆå¹¶ä¸é‡åŒ–ï¼Œæœ€åå®ç° 4-bit é«˜é€Ÿæ¨ç†ã€‚</strong></p><hr><h2 id="ç¬¬ä¸€é˜¶æ®µï¼šäº‘ç«¯å¾®è°ƒä¸å¯¼å‡º-Linux"><a href="#ç¬¬ä¸€é˜¶æ®µï¼šäº‘ç«¯å¾®è°ƒä¸å¯¼å‡º-Linux" class="headerlink" title="ç¬¬ä¸€é˜¶æ®µï¼šäº‘ç«¯å¾®è°ƒä¸å¯¼å‡º (Linux)"></a>ç¬¬ä¸€é˜¶æ®µï¼šäº‘ç«¯å¾®è°ƒä¸å¯¼å‡º (Linux)</h2><p><strong>åœºæ™¯</strong>ï¼šä½ å·²ç»åœ¨äº‘ç«¯ä½¿ç”¨ LLaMA-Factory å®Œæˆäº†æ¨¡å‹è®­ç»ƒï¼Œè¾“å‡ºè·¯å¾„ä¸º <code>./model_output</code>ã€‚<br><strong>ç—›ç‚¹</strong>ï¼šå°è¯•åœ¨æœåŠ¡å™¨åˆå¹¶æ¨¡å‹æ—¶æç¤ºç£ç›˜ç©ºé—´ä¸è¶³ (<code>No space left on device</code>)ã€‚</p><h3 id="1-1-æ”¾å¼ƒäº‘ç«¯åˆå¹¶ï¼Œåªæ‰“åŒ…-Adapter"><a href="#1-1-æ”¾å¼ƒäº‘ç«¯åˆå¹¶ï¼Œåªæ‰“åŒ…-Adapter" class="headerlink" title="1.1 æ”¾å¼ƒäº‘ç«¯åˆå¹¶ï¼Œåªæ‰“åŒ… Adapter"></a>1.1 æ”¾å¼ƒäº‘ç«¯åˆå¹¶ï¼Œåªæ‰“åŒ… Adapter</h3><p>æˆ‘ä»¬ä¸éœ€è¦åœ¨æœåŠ¡å™¨ä¸Šåˆå¹¶ï¼ŒåªæŠŠå¾®è°ƒç”Ÿæˆçš„æƒé‡æ–‡ä»¶ï¼ˆAdapterï¼‰æ‰“åŒ…ä¸‹è½½ã€‚</p><p>åœ¨æœåŠ¡å™¨ç»ˆç«¯æ‰§è¡Œï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"># è¿›å…¥ä½ çš„é¡¹ç›®ç›®å½•
cd &#x2F;root&#x2F;weclone&#x2F;WeClone

# å‹ç¼©å¾®è°ƒè¾“å‡ºæ–‡ä»¶å¤¹ (å‡è®¾è¾“å‡ºè·¯å¾„ä¸º .&#x2F;model_output)
tar -czvf adapter_output.tar.gz .&#x2F;model_output
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="1-2-ä¸‹è½½åˆ°æœ¬åœ°"><a href="#1-2-ä¸‹è½½åˆ°æœ¬åœ°" class="headerlink" title="1.2 ä¸‹è½½åˆ°æœ¬åœ°"></a>1.2 ä¸‹è½½åˆ°æœ¬åœ°</h3><p>ä½¿ç”¨ WinSCP æˆ–å…¶ä»–å·¥å…·ï¼Œå°†è¿™ä¸ªå‡ ç™¾ MB çš„ <code>adapter_output.tar.gz</code> ä¸‹è½½åˆ°ä½ çš„ Mac æœ¬åœ°å¹¶è§£å‹ã€‚</p><ul><li><strong>å‡è®¾è§£å‹è·¯å¾„</strong>ï¼š<code>/Users/hao/Downloads/model_output</code></li></ul><hr><h2 id="ç¬¬äºŒé˜¶æ®µï¼šæœ¬åœ°ç¯å¢ƒé…ç½®-Mac-M4"><a href="#ç¬¬äºŒé˜¶æ®µï¼šæœ¬åœ°ç¯å¢ƒé…ç½®-Mac-M4" class="headerlink" title="ç¬¬äºŒé˜¶æ®µï¼šæœ¬åœ°ç¯å¢ƒé…ç½® (Mac M4)"></a>ç¬¬äºŒé˜¶æ®µï¼šæœ¬åœ°ç¯å¢ƒé…ç½® (Mac M4)</h2><p>å›åˆ°ä½ çš„ Macï¼Œæ‰“å¼€ç»ˆç«¯ï¼ˆTerminalï¼‰ï¼Œé…ç½®æœ¬åœ°æµæ°´çº¿ã€‚</p><h3 id="2-1-å®‰è£…åŸºç¡€-Python-åº“"><a href="#2-1-å®‰è£…åŸºç¡€-Python-åº“" class="headerlink" title="2.1 å®‰è£…åŸºç¡€ Python åº“"></a>2.1 å®‰è£…åŸºç¡€ Python åº“</h3><p>Mac è‡ªå¸¦ Python 3.9ï¼Œç›´æ¥å®‰è£…æ‰€éœ€çš„ AI åŸºç¡€åº“ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">pip3 install torch transformers peft accelerate protobuf sentencepiece gguf numpy
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="2-2-å‡†å¤‡åŸå§‹æ¨¡å‹"><a href="#2-2-å‡†å¤‡åŸå§‹æ¨¡å‹" class="headerlink" title="2.2 å‡†å¤‡åŸå§‹æ¨¡å‹"></a>2.2 å‡†å¤‡åŸå§‹æ¨¡å‹</h3><p>æ—¢ç„¶æœåŠ¡å™¨ä¸‹è½½å¤ªæ…¢ï¼Œæˆ‘ä»¬ç›´æ¥åœ¨ Mac ä¸Šä¸‹è½½åŸå§‹æ¨¡å‹ <code>Qwen2.5-7B-Instruct</code>ã€‚æ¨èä½¿ç”¨ HuggingFace æˆ– ModelScope ä¸‹è½½ã€‚</p><ul><li><strong>å‡è®¾æ¨¡å‹å­˜æ”¾è·¯å¾„</strong>ï¼š<code>/Users/hao/Downloads/Qwen2.5-7B-Instruct</code></li></ul><hr><h2 id="ç¬¬ä¸‰é˜¶æ®µï¼šæ¨¡å‹åˆå¹¶-è§£å†³-16G-å†…å­˜æº¢å‡º"><a href="#ç¬¬ä¸‰é˜¶æ®µï¼šæ¨¡å‹åˆå¹¶-è§£å†³-16G-å†…å­˜æº¢å‡º" class="headerlink" title="ç¬¬ä¸‰é˜¶æ®µï¼šæ¨¡å‹åˆå¹¶ (è§£å†³ 16G å†…å­˜æº¢å‡º)"></a>ç¬¬ä¸‰é˜¶æ®µï¼šæ¨¡å‹åˆå¹¶ (è§£å†³ 16G å†…å­˜æº¢å‡º)</h2><p><strong>æ ¸å¿ƒé—®é¢˜</strong>ï¼šMac M4 16GB å†…å­˜åŠ è½½å®Œæ•´çš„ 7B FP16 æ¨¡å‹ï¼ˆçº¦ 15GBï¼‰éå¸¸åƒåŠ›ï¼Œæ™®é€šçš„åˆå¹¶è„šæœ¬ä¼šæŠ¥ <code>UserWarning: copying from a non-meta parameter...</code> ç”šè‡³ç›´æ¥å´©æºƒã€‚æˆ‘ä»¬éœ€è¦åˆ©ç”¨ MacOS çš„ Swapï¼ˆè™šæ‹Ÿå†…å­˜ï¼‰æœºåˆ¶ã€‚</p><h3 id="3-1-ç¼–å†™â€œå¼ºåˆ¶-CPUâ€åˆå¹¶è„šæœ¬"><a href="#3-1-ç¼–å†™â€œå¼ºåˆ¶-CPUâ€åˆå¹¶è„šæœ¬" class="headerlink" title="3.1 ç¼–å†™â€œå¼ºåˆ¶ CPUâ€åˆå¹¶è„šæœ¬"></a>3.1 ç¼–å†™â€œå¼ºåˆ¶ CPUâ€åˆå¹¶è„šæœ¬</h3><p>åœ¨ä¸‹è½½ç›®å½•æ–°å»ºæ–‡ä»¶ <code>merge_model.py</code>ï¼Œå†™å…¥ä»¥ä¸‹ä»£ç ï¼š</p><pre class="line-numbers language-python" data-language="python"><code class="language-python">import torch
from transformers import AutoModelForCausalLM, AutoTokenizer
from peft import PeftModel
import os
import gc

# &#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;
# âš ï¸ è¯·ä¿®æ”¹ä»¥ä¸‹è·¯å¾„ä¸ºä½ çš„çœŸå®è·¯å¾„
# &#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;
base_model_path &#x3D; &quot;&#x2F;Users&#x2F;hao&#x2F;Downloads&#x2F;Qwen2.5-7B-Instruct&quot;
adapter_path &#x3D; &quot;&#x2F;Users&#x2F;hao&#x2F;Downloads&#x2F;model_output&quot;
output_path &#x3D; &quot;&#x2F;Users&#x2F;hao&#x2F;Downloads&#x2F;Qwen2.5_Merged_Final&quot;
# &#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;

print(f&quot;ğŸš€ å¼€å§‹åŠ è½½åŸå§‹æ¨¡å‹: &#123;base_model_path&#125;&quot;)
print(&quot;âš ï¸ æ³¨æ„ï¼šè¿™ä¸€æ­¥ä¼šå æ»¡å†…å­˜å¹¶ä½¿ç”¨ç¡¬ç›˜äº¤æ¢(Swap)ï¼Œç”µè„‘å¯èƒ½ä¼šå˜å¡ï¼Œè¯·è€å¿ƒç­‰å¾…...&quot;)

try:
    tokenizer &#x3D; AutoTokenizer.from_pretrained(base_model_path, trust_remote_code&#x3D;True)
    
    # å…³é”®ä¿®æ”¹ï¼šå¼ºåˆ¶ä½¿ç”¨ CPUï¼Œé¿å… meta device æ˜ å°„é”™è¯¯
    # device_map&#x3D;&#123;&quot;&quot;: &quot;cpu&quot;&#125; æ˜¯è§£å†³ 16G å†…å­˜æŠ¥é”™çš„å…³é”®
    base_model &#x3D; AutoModelForCausalLM.from_pretrained(
        base_model_path,
        torch_dtype&#x3D;torch.float16,
        device_map&#x3D;&#123;&quot;&quot;: &quot;cpu&quot;&#125;, 
        trust_remote_code&#x3D;True
    )
    
    print(&quot;ğŸ§© æ­£åœ¨åŠ è½½å¾®è°ƒè¡¥ä¸ (Adapter)...&quot;)
    # Adapter ä¹Ÿå¼ºåˆ¶åŠ è½½åˆ° CPU
    model_to_merge &#x3D; PeftModel.from_pretrained(base_model, adapter_path, device_map&#x3D;&#123;&quot;&quot;: &quot;cpu&quot;&#125;)

    print(&quot;ğŸ”„ æ­£åœ¨æ‰§è¡Œåˆå¹¶æ“ä½œ (Merge and Unload)...&quot;)
    merged_model &#x3D; model_to_merge.merge_and_unload()

    print(f&quot;ğŸ’¾ æ­£åœ¨ä¿å­˜å®Œæ•´æ¨¡å‹åˆ°: &#123;output_path&#125;&quot;)
    merged_model.save_pretrained(output_path, safe_serialization&#x3D;True)
    tokenizer.save_pretrained(output_path)
    print(&quot;ğŸ‰ åˆå¹¶æˆåŠŸï¼&quot;)

except Exception as e:
    print(f&quot;âŒ å‘ç”Ÿé”™è¯¯: &#123;e&#125;&quot;)
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="3-2-è¿è¡Œåˆå¹¶è„šæœ¬"><a href="#3-2-è¿è¡Œåˆå¹¶è„šæœ¬" class="headerlink" title="3.2 è¿è¡Œåˆå¹¶è„šæœ¬"></a>3.2 è¿è¡Œåˆå¹¶è„šæœ¬</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">python3 merge_model.py
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ul><li><strong>æ³¨æ„</strong>ï¼šè¿è¡ŒæœŸé—´å†…å­˜å‹åŠ›ä¼šå˜å¤§ï¼Œç­‰å¾…å‡ åˆ†é’Ÿå³å¯ç”Ÿæˆçº¦ 15GB çš„ <code>Qwen2.5_Merged_Final</code> æ–‡ä»¶å¤¹ã€‚</li></ul><hr><h2 id="ç¬¬å››é˜¶æ®µï¼šGGUF-é‡åŒ–ä¸å‹ç¼©"><a href="#ç¬¬å››é˜¶æ®µï¼šGGUF-é‡åŒ–ä¸å‹ç¼©" class="headerlink" title="ç¬¬å››é˜¶æ®µï¼šGGUF é‡åŒ–ä¸å‹ç¼©"></a>ç¬¬å››é˜¶æ®µï¼šGGUF é‡åŒ–ä¸å‹ç¼©</h2><p>ä¸ºäº†è®©æ¨¡å‹åœ¨ LM Studio é‡Œè·‘å¾—é£å¿«ï¼Œæˆ‘ä»¬éœ€è¦å°†å…¶è½¬æ¢ä¸º GGUF æ ¼å¼å¹¶å‹ç¼©ä¸º 4-bitã€‚</p><h3 id="4-1-ç¼–è¯‘-llama-cpp-å·¥å…·"><a href="#4-1-ç¼–è¯‘-llama-cpp-å·¥å…·" class="headerlink" title="4.1 ç¼–è¯‘ llama.cpp å·¥å…·"></a>4.1 ç¼–è¯‘ llama.cpp å·¥å…·</h3><p><code>llama.cpp</code> æ˜¯è¿›è¡Œ GGUF è½¬æ¢çš„æ ¸å¿ƒå·¥å…·ã€‚</p><ol><li><strong>ä¸‹è½½æºç </strong>ï¼š<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">cd &#x2F;Users&#x2F;hao&#x2F;Downloads
git clone [https:&#x2F;&#x2F;github.com&#x2F;ggerganov&#x2F;llama.cpp](https:&#x2F;&#x2F;github.com&#x2F;ggerganov&#x2F;llama.cpp)
cd llama.cpp
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></li></ol><ol start="2"><li><strong>è§£å†³ CMake é—®é¢˜</strong>ï¼š<br>å¦‚æœè¿è¡Œ <code>make</code> æç¤ºè¢«å¼ƒç”¨ï¼Œæˆ–è€… <code>cmake</code> æ‰¾ä¸åˆ°ï¼Œè¯·æ‰§è¡Œï¼š<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"># å®‰è£… cmake
pip3 install cmake
# å°† python bin ç›®å½•åŠ å…¥ç¯å¢ƒå˜é‡ (ä¸´æ—¶ï¼Œé˜²æ­¢æ‰¾ä¸åˆ°å‘½ä»¤)
export PATH&#x3D;&quot;&#x2F;Users&#x2F;hao&#x2F;Library&#x2F;Python&#x2F;3.9&#x2F;bin:$PATH&quot;
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></li></ol><ol start="3"><li>**å¼€å§‹ç¼–è¯‘ (é€‚é… Apple Silicon)**ï¼š<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">cmake -B build
cmake --build build --config Release -j 8
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></li></ol><h3 id="4-2-æ ¼å¼è½¬æ¢-HF-gt-GGUF-FP16"><a href="#4-2-æ ¼å¼è½¬æ¢-HF-gt-GGUF-FP16" class="headerlink" title="4.2 æ ¼å¼è½¬æ¢ (HF -&gt; GGUF FP16)"></a>4.2 æ ¼å¼è½¬æ¢ (HF -&gt; GGUF FP16)</h3><p>å…ˆè½¬ä¸ºå•æ–‡ä»¶ GGUFã€‚<br><strong>é¿å‘æŒ‡å—</strong>ï¼šä¸è¦å®‰è£… <code>requirements.txt</code> é‡Œçš„æ‰€æœ‰åº“ï¼ˆç‰¹åˆ«æ˜¯ matplotlib ä¼šç‰ˆæœ¬å†²çªï¼‰ï¼Œåªè£…æ ¸å¿ƒåº“å³å¯ã€‚</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"># 1. å®‰è£…è½¬æ¢è„šæœ¬ä¾èµ–
pip3 install gguf protobuf numpy

# 2. æ‰§è¡Œè½¬æ¢ (ç”Ÿæˆä¸´æ—¶çš„å¤§æ–‡ä»¶ï¼Œçº¦ 15GB)
python3 convert_hf_to_gguf.py \
  &#x2F;Users&#x2F;hao&#x2F;Downloads&#x2F;Qwen2.5_Merged_Final \
  --outfile &#x2F;Users&#x2F;hao&#x2F;Downloads&#x2F;temp_f16.gguf \
  --outtype f16
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="4-3-æ‰§è¡Œé‡åŒ–-FP16-gt-Q4-K-M"><a href="#4-3-æ‰§è¡Œé‡åŒ–-FP16-gt-Q4-K-M" class="headerlink" title="4.3 æ‰§è¡Œé‡åŒ– (FP16 -&gt; Q4_K_M)"></a>4.3 æ‰§è¡Œé‡åŒ– (FP16 -&gt; Q4_K_M)</h3><p>ä½¿ç”¨ç¼–è¯‘å¥½çš„ C++ å·¥å…·è¿›è¡Œæè‡´å‹ç¼©ã€‚<code>Q4_K_M</code> æ˜¯ç›®å‰ M èŠ¯ç‰‡ä¸Šé€Ÿåº¦ä¸ç²¾åº¦å¹³è¡¡æœ€å¥½çš„é€‰æ‹©ã€‚</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">.&#x2F;build&#x2F;bin&#x2F;llama-quantize \
  &#x2F;Users&#x2F;hao&#x2F;Downloads&#x2F;temp_f16.gguf \
  &#x2F;Users&#x2F;hao&#x2F;Downloads&#x2F;Qwen2.5-7B-Final-Q4_K_M.gguf \
  Q4_K_M
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><ul><li><strong>æˆæœ</strong>ï¼šä½ å°†å¾—åˆ°ä¸€ä¸ªçº¦ <strong>4.7GB</strong> çš„ <code>.gguf</code> æ–‡ä»¶ã€‚</li></ul><hr><h2 id="ç¬¬äº”é˜¶æ®µï¼šLM-Studio-éƒ¨ç½²ä¸-API-æœåŠ¡"><a href="#ç¬¬äº”é˜¶æ®µï¼šLM-Studio-éƒ¨ç½²ä¸-API-æœåŠ¡" class="headerlink" title="ç¬¬äº”é˜¶æ®µï¼šLM Studio éƒ¨ç½²ä¸ API æœåŠ¡"></a>ç¬¬äº”é˜¶æ®µï¼šLM Studio éƒ¨ç½²ä¸ API æœåŠ¡</h2><h3 id="5-1-è§£å†³â€œæ— æ³•è¯†åˆ«æ¨¡å‹â€çš„ç›®å½•ç»“æ„å‘"><a href="#5-1-è§£å†³â€œæ— æ³•è¯†åˆ«æ¨¡å‹â€çš„ç›®å½•ç»“æ„å‘" class="headerlink" title="5.1 è§£å†³â€œæ— æ³•è¯†åˆ«æ¨¡å‹â€çš„ç›®å½•ç»“æ„å‘"></a>5.1 è§£å†³â€œæ— æ³•è¯†åˆ«æ¨¡å‹â€çš„ç›®å½•ç»“æ„å‘</h3><p>å¾ˆå¤šæ–°æ‰‹ç›´æ¥æŠŠ <code>.gguf</code> æ‹–è¿›æ–‡ä»¶å¤¹ï¼Œç»“æœ LM Studio æ‰«æä¸åˆ°ã€‚<br><strong>LM Studio å¼ºåˆ¶è¦æ±‚ç›®å½•ç»“æ„ä¸ºï¼š</strong> <code>å‘å¸ƒè€…å/æ¨¡å‹å/æ¨¡å‹æ–‡ä»¶</code>ã€‚</p><p>è¯·æŒ‰ä»¥ä¸‹ç»“æ„æ•´ç†ä½ çš„æ–‡ä»¶ï¼š</p><pre class="line-numbers language-text" data-language="text"><code class="language-text">/Users/hao/Documents/lmstudio
â””â”€â”€ MyLocal                 &lt;-- ä¸€çº§ç›®å½•ï¼šå‚å•†å (éšä¾¿èµ·)
    â””â”€â”€ Qwen2.5-Final       &lt;-- äºŒçº§ç›®å½•ï¼šæ¨¡å‹å
        â””â”€â”€ Qwen2.5-7B-Final-Q4_K_M.gguf  &lt;-- ä½ çš„æ¨¡å‹æ–‡ä»¶
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h3 id="5-2-åŠ è½½æ¨¡å‹"><a href="#5-2-åŠ è½½æ¨¡å‹" class="headerlink" title="5.2 åŠ è½½æ¨¡å‹"></a>5.2 åŠ è½½æ¨¡å‹</h3><ol><li>æ‰“å¼€ LM Studioï¼Œç‚¹å‡»å·¦ä¾§æ–‡ä»¶å¤¹å›¾æ ‡ (<strong>My Models</strong>)ã€‚</li><li>è®¾ç½®è·¯å¾„ä¸º <code>/Users/hao/Documents/lmstudio</code>ã€‚</li><li>ç‚¹å‡» <strong>Rescan Directory</strong>ï¼ŒåŠ è½½å¹¶é€‰æ‹©æ¨¡å‹ã€‚</li></ol><h3 id="5-3-å¼€å¯å±€åŸŸç½‘è®¿é—®-API-æœåŠ¡"><a href="#5-3-å¼€å¯å±€åŸŸç½‘è®¿é—®-API-æœåŠ¡" class="headerlink" title="5.3 å¼€å¯å±€åŸŸç½‘è®¿é—® (API æœåŠ¡)"></a>5.3 å¼€å¯å±€åŸŸç½‘è®¿é—® (API æœåŠ¡)</h3><ol><li>ç‚¹å‡»å·¦ä¾§åŒå‘ç®­å¤´å›¾æ ‡ (<strong>Local Server</strong>)ã€‚</li><li>ç‚¹å‡»é¡¶éƒ¨ <strong>Start Server</strong>ã€‚</li><li><strong>å…³é”®è®¾ç½®</strong>ï¼šå°†å³ä¾§é…ç½®æ ä¸­çš„ <code>Port</code> -&gt; <code>Network Interface</code> ä» <code>Localhost</code> æ”¹ä¸º **<code>Local Network</code>**ã€‚</li><li>ç°åœ¨ï¼Œä½ å¯ä»¥é€šè¿‡ <code>http://ä½ çš„MacIP:1234/v1</code> åœ¨å±€åŸŸç½‘å†…è®¿é—®è¿™ä¸ªæ•°å­—äººæœåŠ¡äº†ï¼</li></ol><hr><h2 id="ç¬¬å…­é˜¶æ®µï¼šç£ç›˜å¤§æ‰«é™¤-å›è¡€"><a href="#ç¬¬å…­é˜¶æ®µï¼šç£ç›˜å¤§æ‰«é™¤-å›è¡€" class="headerlink" title="ç¬¬å…­é˜¶æ®µï¼šç£ç›˜å¤§æ‰«é™¤ (å›è¡€)"></a>ç¬¬å…­é˜¶æ®µï¼šç£ç›˜å¤§æ‰«é™¤ (å›è¡€)</h2><p>ä¿ç•™å¥½æœ€ç»ˆçš„ 4.7GB æ–‡ä»¶åï¼Œæˆ‘ä»¬å¯ä»¥åˆ é™¤å‡ å GB çš„ä¸­é—´æ–‡ä»¶æ¥é‡Šæ”¾ç©ºé—´ã€‚</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"># åˆ é™¤åŸå§‹åºå¤§çš„æ¨¡å‹æ–‡ä»¶å¤¹
rm -rf &#x2F;Users&#x2F;hao&#x2F;Downloads&#x2F;Qwen2.5-7B-Instruct
rm -rf &#x2F;Users&#x2F;hao&#x2F;Downloads&#x2F;Qwen2.5_Merged_Final
rm -f &#x2F;Users&#x2F;hao&#x2F;Downloads&#x2F;temp_f16.gguf

# åˆ é™¤ç¼–è¯‘å·¥å…·å’Œæºç 
rm -rf &#x2F;Users&#x2F;hao&#x2F;Downloads&#x2F;llama.cpp
rm -rf &#x2F;Users&#x2F;hao&#x2F;Downloads&#x2F;Merge_Work
rm -rf &#x2F;Users&#x2F;hao&#x2F;Downloads&#x2F;model_output

# æ¸…ç†éšè—çš„ Python å’Œ HuggingFace ç¼“å­˜ (è¿™éƒ¨åˆ†å ç”¨å·¨å¤§)
rm -rf ~&#x2F;.cache&#x2F;huggingface
rm -rf ~&#x2F;.cache&#x2F;pip
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>é€šè¿‡è¿™å¥—æµç¨‹ï¼Œæˆ‘ä»¬æˆåŠŸç»•è¿‡äº†äº‘ç«¯ç£ç›˜é™åˆ¶ï¼Œåˆ©ç”¨ Mac M4 å¼ºå¤§çš„å•æ ¸æ€§èƒ½å’Œç»Ÿä¸€å†…å­˜æ¶æ„ï¼Œå®Œæˆäº†é«˜è´¨é‡çš„ç§æœ‰æ¨¡å‹éƒ¨ç½²ã€‚æœ€ç»ˆè·å¾—çš„ 4-bit æ¨¡å‹åœ¨ M4 ä¸Šæ¨ç†é€Ÿåº¦æå¿«ï¼Œå®Œå…¨æ»¡è¶³å®æ—¶æ•°å­—äººäº¤äº’çš„éœ€æ±‚ã€‚</p><pre><code>
</code></pre></div><div class="prev-or-next"><div class="post-foot-next"><a href="/posts/fa6efa10.html" target="_self"><i class="iconfont icon-chevronleft"></i> <span>ä¸Šä¸€é¡µ</span></a></div><div class="post-attach"><span class="post-pubtime"><i class="iconfont icon-updatetime mr-10" title="æ›´æ–°æ—¶é—´"></i> 2026-01-16 22:00:00 </span><span class="post-categories"><i class="iconfont icon-bookmark" title="åˆ†ç±»"></i> <span class="span--category"><a href="/categories/AI%E5%AE%9E%E6%88%98/" title="AIå®æˆ˜"><b>#</b> AIå®æˆ˜ </a></span><span class="span--category"><a href="/categories/AI%E5%AE%9E%E6%88%98/%E6%A8%A1%E5%9E%8B%E9%83%A8%E7%BD%B2/" title="æ¨¡å‹éƒ¨ç½²"><b>#</b> æ¨¡å‹éƒ¨ç½²</a></span></span></div><div class="post-foot-prev"><a href="/posts/578d2016.html" target="_self"><span>ä¸‹ä¸€é¡µ</span> <i class="iconfont icon-chevronright"></i></a></div></div></div><div id="btn-catalog" class="btn-catalog"><i class="iconfont icon-catalog"></i></div><div class="post-catalog hidden" id="catalog"><div class="title">ç›®å½•</div><div class="catalog-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%89%8D%E8%A8%80"><span class="toc-text">å‰è¨€</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E4%B8%80%E9%98%B6%E6%AE%B5%EF%BC%9A%E4%BA%91%E7%AB%AF%E5%BE%AE%E8%B0%83%E4%B8%8E%E5%AF%BC%E5%87%BA-Linux"><span class="toc-text">ç¬¬ä¸€é˜¶æ®µï¼šäº‘ç«¯å¾®è°ƒä¸å¯¼å‡º (Linux)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-%E6%94%BE%E5%BC%83%E4%BA%91%E7%AB%AF%E5%90%88%E5%B9%B6%EF%BC%8C%E5%8F%AA%E6%89%93%E5%8C%85-Adapter"><span class="toc-text">1.1 æ”¾å¼ƒäº‘ç«¯åˆå¹¶ï¼Œåªæ‰“åŒ… Adapter</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-%E4%B8%8B%E8%BD%BD%E5%88%B0%E6%9C%AC%E5%9C%B0"><span class="toc-text">1.2 ä¸‹è½½åˆ°æœ¬åœ°</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E4%BA%8C%E9%98%B6%E6%AE%B5%EF%BC%9A%E6%9C%AC%E5%9C%B0%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE-Mac-M4"><span class="toc-text">ç¬¬äºŒé˜¶æ®µï¼šæœ¬åœ°ç¯å¢ƒé…ç½® (Mac M4)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-%E5%AE%89%E8%A3%85%E5%9F%BA%E7%A1%80-Python-%E5%BA%93"><span class="toc-text">2.1 å®‰è£…åŸºç¡€ Python åº“</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-%E5%87%86%E5%A4%87%E5%8E%9F%E5%A7%8B%E6%A8%A1%E5%9E%8B"><span class="toc-text">2.2 å‡†å¤‡åŸå§‹æ¨¡å‹</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E4%B8%89%E9%98%B6%E6%AE%B5%EF%BC%9A%E6%A8%A1%E5%9E%8B%E5%90%88%E5%B9%B6-%E8%A7%A3%E5%86%B3-16G-%E5%86%85%E5%AD%98%E6%BA%A2%E5%87%BA"><span class="toc-text">ç¬¬ä¸‰é˜¶æ®µï¼šæ¨¡å‹åˆå¹¶ (è§£å†³ 16G å†…å­˜æº¢å‡º)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-%E7%BC%96%E5%86%99%E2%80%9C%E5%BC%BA%E5%88%B6-CPU%E2%80%9D%E5%90%88%E5%B9%B6%E8%84%9A%E6%9C%AC"><span class="toc-text">3.1 ç¼–å†™â€œå¼ºåˆ¶ CPUâ€åˆå¹¶è„šæœ¬</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-%E8%BF%90%E8%A1%8C%E5%90%88%E5%B9%B6%E8%84%9A%E6%9C%AC"><span class="toc-text">3.2 è¿è¡Œåˆå¹¶è„šæœ¬</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E5%9B%9B%E9%98%B6%E6%AE%B5%EF%BC%9AGGUF-%E9%87%8F%E5%8C%96%E4%B8%8E%E5%8E%8B%E7%BC%A9"><span class="toc-text">ç¬¬å››é˜¶æ®µï¼šGGUF é‡åŒ–ä¸å‹ç¼©</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-%E7%BC%96%E8%AF%91-llama-cpp-%E5%B7%A5%E5%85%B7"><span class="toc-text">4.1 ç¼–è¯‘ llama.cpp å·¥å…·</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-%E6%A0%BC%E5%BC%8F%E8%BD%AC%E6%8D%A2-HF-gt-GGUF-FP16"><span class="toc-text">4.2 æ ¼å¼è½¬æ¢ (HF -&gt; GGUF FP16)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-3-%E6%89%A7%E8%A1%8C%E9%87%8F%E5%8C%96-FP16-gt-Q4-K-M"><span class="toc-text">4.3 æ‰§è¡Œé‡åŒ– (FP16 -&gt; Q4_K_M)</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E4%BA%94%E9%98%B6%E6%AE%B5%EF%BC%9ALM-Studio-%E9%83%A8%E7%BD%B2%E4%B8%8E-API-%E6%9C%8D%E5%8A%A1"><span class="toc-text">ç¬¬äº”é˜¶æ®µï¼šLM Studio éƒ¨ç½²ä¸ API æœåŠ¡</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-1-%E8%A7%A3%E5%86%B3%E2%80%9C%E6%97%A0%E6%B3%95%E8%AF%86%E5%88%AB%E6%A8%A1%E5%9E%8B%E2%80%9D%E7%9A%84%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84%E5%9D%91"><span class="toc-text">5.1 è§£å†³â€œæ— æ³•è¯†åˆ«æ¨¡å‹â€çš„ç›®å½•ç»“æ„å‘</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-2-%E5%8A%A0%E8%BD%BD%E6%A8%A1%E5%9E%8B"><span class="toc-text">5.2 åŠ è½½æ¨¡å‹</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-3-%E5%BC%80%E5%90%AF%E5%B1%80%E5%9F%9F%E7%BD%91%E8%AE%BF%E9%97%AE-API-%E6%9C%8D%E5%8A%A1"><span class="toc-text">5.3 å¼€å¯å±€åŸŸç½‘è®¿é—® (API æœåŠ¡)</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E5%85%AD%E9%98%B6%E6%AE%B5%EF%BC%9A%E7%A3%81%E7%9B%98%E5%A4%A7%E6%89%AB%E9%99%A4-%E5%9B%9E%E8%A1%80"><span class="toc-text">ç¬¬å…­é˜¶æ®µï¼šç£ç›˜å¤§æ‰«é™¤ (å›è¡€)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%80%BB%E7%BB%93"><span class="toc-text">æ€»ç»“</span></a></li></ol></div></div><script src="/js/catalog.js"></script><div class="comments-container"><script async type="text/javascript" src="https://cdn.jsdelivr.net/npm/@waline/client@2.5.1/dist/legacy.min.js" onload="loadWalineSuc(this)"></script><div id="waline-comments"></div><script>function loadWalineSuc(){new Waline({el:"#waline-comments",path:location.pathname,serverURL:"https://ve.haoqiyun.tk"})}</script></div></div><div class="footer"><div class="social"><ul><li><a title="github" target="_blank" rel="noopener" href="https://github.com/haoqi7"><i class="iconfont icon-github"></i></a></li></ul></div><div class="footer-more"><a target="_blank" rel="noopener" href="https://github.com/Haoqi7">Copyright Â© 2026 Rabbit</a></div><div class="footer-views">æœ¬ç«™æ€»è®¿é—®é‡<span id="busuanzi_value_site_pv"></span>æ¬¡ æœ¬æ–‡æ€»é˜…è¯»é‡<span id="busuanzi_value_page_pv"></span>æ¬¡ æœ¬ç«™è®¿å®¢æ•°<span id="busuanzi_value_site_uv"></span>äºº</div></div></div><div class="tools-bar"><div class="back-to-top tools-bar-item hidden"><a href="javascript: void(0)"><i class="iconfont icon-chevronup"></i></a></div><script src="/js/backtotop.js"></script><div class="search-icon tools-bar-item" id="search-icon"><a href="javascript: void(0)"><i class="iconfont icon-search"></i></a></div><div class="search-overlay hidden"><div class="search-content" tabindex="0"><div class="search-title"><span class="search-icon-input"><a href="javascript: void(0)"><i class="iconfont icon-search"></i> </a></span><input type="text" class="search-input" id="search-input" placeholder="æœç´¢..."> <span class="search-close-icon" id="search-close-icon"><a href="javascript: void(0)"><i class="iconfont icon-close"></i></a></span></div><div class="search-result" id="search-result"></div></div></div><script type="text/javascript">var inputArea=document.querySelector("#search-input"),searchOverlayArea=document.querySelector(".search-overlay");function openOrHideSearchContent(){searchOverlayArea.classList.contains("hidden")?(searchOverlayArea.classList.remove("hidden"),document.body.classList.add("hidden")):(searchOverlayArea.classList.add("hidden"),document.body.classList.remove("hidden"))}function blurSearchContent(e){e.target===searchOverlayArea&&openOrHideSearchContent()}inputArea.onclick=function(){getSearchFile(),this.onclick=null},inputArea.onkeydown=function(){if(13==event.keyCode)return!1},document.querySelector("#search-icon").addEventListener("click",openOrHideSearchContent,!1),document.querySelector("#search-close-icon").addEventListener("click",openOrHideSearchContent,!1),searchOverlayArea.addEventListener("click",blurSearchContent,!1);var searchFunc=function(e,t,n){var r=document.getElementById(t),a=document.getElementById(n);a.innerHTML="<ul><span class='local-search-empty'>é¦–æ¬¡æœç´¢ï¼Œæ­£åœ¨è½½å…¥ç´¢å¼•æ–‡ä»¶ï¼Œè¯·ç¨åâ€¦â€¦<span></ul>",$.ajax({url:e,dataType:"xml",success:function(e){var t=$("entry",e).map(function(){return{title:$("title",this).text(),content:$("content",this).text(),url:$("url",this).text()}}).get();a.innerHTML="",r.addEventListener("input",function(){var u='<ul class="search-result-list">',h=this.value.trim().toLowerCase().split(/[\s\-]+/);if(a.innerHTML="",!(this.value.trim().length<=0)){if(t.forEach(function(e){var n,r,a=!0,t=(e.title&&""!==e.title.trim()||(e.title="Untitled"),e.title.trim()),c=t.toLowerCase(),s=e.content.trim().replace(/<[^>]+>/g,""),i=s.toLowerCase(),e=e.url,l=-1,o=-1;""!==i?h.forEach(function(e,t){n=c.indexOf(e),l=i.indexOf(e),n<0&&l<0?a=!1:(l<0&&(l=0),0==t&&(o=l))}):a=!1,a&&(u+="<li><a href='"+e+"' class='search-result-title'>"+t+"</a>",0<=o&&(e=o+80,(e=0==(t=(t=o-20)<0?0:t)?100:e)>s.length&&(e=s.length),r=s.substr(t,e),h.forEach(function(e){var t=new RegExp(e,"gi");r=r.replace(t,'<span class="search-keyword">'+e+"</span>")}),u+='<p class="search-result-abstract">'+r+"...</p>"),u+="</li>")}),-1===(u+="</ul>").indexOf("<li>"))return a.innerHTML="<ul><span class='local-search-empty'>æ²¡æœ‰æ‰¾åˆ°å†…å®¹ï¼Œè¯·å°è¯•æ›´æ¢æ£€ç´¢è¯ã€‚<span></ul>";a.innerHTML=u}})},error:function(e,t,n){a.innerHTML="",404===e.status?a.innerHTML="<ul><span class='local-search-empty'>æœªæ‰¾åˆ°search.xmlæ–‡ä»¶ï¼Œå…·ä½“è¯·å‚è€ƒï¼š<a href='https://github.com/zchengsite/hexo-theme-oranges#configuration' target='_black'>configuration</a><span></ul>":a.innerHTML="<ul><span class='local-search-empty'>è¯·æ±‚å¤±è´¥ï¼Œå°è¯•é‡æ–°åˆ·æ–°é¡µé¢æˆ–ç¨åé‡è¯•ã€‚<span></ul>"}}),$(document).on("click","#search-close-icon",function(){$("#search-input").val(""),$("#search-result").html("")})},getSearchFile=function(){searchFunc("/search.xml","search-input","search-result")}</script><div class="tools-bar-item theme-icon" id="switch-color-scheme"><a href="javascript: void(0)"><i id="theme-icon" class="iconfont icon-moon"></i></a></div><script src="/js/colorscheme.js"></script><div class="share-icon tools-bar-item"><a href="javascript: void(0)" id="share-icon"><i class="iconfont iconshare"></i></a><div class="share-content hidden"><a class="share-item" href="https://twitter.com/intent/tweet?text=' + %E5%85%A8%E6%B5%81%E7%A8%8B%E5%AE%9E%E6%88%98%EF%BC%9A%E4%BA%91%E7%AB%AF%E5%BE%AE%E8%B0%83%20Qwen2.5%20%E5%88%B0%20Mac(M4)%20%E6%9C%AC%E5%9C%B0%E9%87%8F%E5%8C%96%E9%83%A8%E7%BD%B2%E4%BF%9D%E5%A7%86%E7%BA%A7%E6%95%99%E7%A8%8B + '&url=' + https%3A%2F%2Fhaoqi7.github.io%2Fposts%2Fa222e961.html + '" target="_blank" title="Twitter"><i class="iconfont icon-twitter"></i> </a><a class="share-item" href="https://www.facebook.com/sharer.php?u=https://haoqi7.github.io/posts/a222e961.html" target="_blank" title="Facebook"><i class="iconfont icon-facebooksquare"></i></a></div></div><script src="/js/shares.js"></script></div></div><style>[bg-lazy]{background-image:none!important;background-color:#eee!important}</style><script>window.imageLazyLoadSetting={isSPA:!1,preloadRatio:1,processImages:null}</script><script>window.addEventListener("load",function(){var t=/\.(gif|jpg|jpeg|tiff|png)$/i,r=/^data:image\/[a-z\d\-\.\+]+;base64,/;Array.prototype.slice.call(document.querySelectorAll("img[data-original]")).forEach(function(a){var e=a.parentNode;"A"===e.tagName&&(t.test(e.href)||r.test(e.href))&&(e.href=a.dataset.original)})})</script><script>(r=>{r.imageLazyLoadSetting.processImages=t;var a=r.imageLazyLoadSetting.isSPA,o=r.imageLazyLoadSetting.preloadRatio||1,d=i();function i(){var t=Array.prototype.slice.call(document.querySelectorAll("img[data-original]")),e=Array.prototype.slice.call(document.querySelectorAll("[bg-lazy]"));return t.concat(e)}function t(t){(a||t)&&(d=i());for(var e,n=0;n<d.length;n++)0<=(e=(e=d[n]).getBoundingClientRect()).bottom&&0<=e.left&&e.top<=(r.innerHeight*o||document.documentElement.clientHeight*o)&&(()=>{var t,e,a,o=d[n],i=function(){d=d.filter(function(t){return o!==t}),r.imageLazyLoadSetting.onImageLoaded&&r.imageLazyLoadSetting.onImageLoaded(o)};(t=o).dataset.loaded||(t.hasAttribute("bg-lazy")?(t.removeAttribute("bg-lazy"),i()):(e=new Image,a=t.getAttribute("data-original"),e.onload=function(){t.src=a,t.removeAttribute("data-original"),t.setAttribute("data-loaded",!0),i()},e.onerror=function(){t.removeAttribute("data-original"),t.setAttribute("data-loaded",!1),t.src=a},t.src!==a&&(e.src=a)))})()}function e(){clearTimeout(t.tId),t.tId=setTimeout(t,500)}t(),document.addEventListener("scroll",e),r.addEventListener("resize",e),r.addEventListener("orientationchange",e)})(this)</script></body></html>